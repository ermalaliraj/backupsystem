<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	

<f:view locale="#{userBean.locale}">

	<h:head>
		<h:outputScript library="primefaces" name="jquery/jquery.js" />
		<h:outputScript library="primefaces" name="primefaces.js" />
		<title><ui:insert name="title">Ticket Management</ui:insert></title>

		<script type="text/javascript">
			//<![CDATA[ 

			function get_browser_info() {
				var ua = navigator.userAgent, tem, M = ua
						.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)
						|| [];
				if (/trident/i.test(M[1])) {
					tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
					return {
						name : 'IE',
						version : (tem[1] || '')
					};
				}
				if (M[1] === 'Chrome') {
					tem = ua.match(/\bOPR\/(\d+)/)
					if (tem != null) {
						return {
							name : 'Opera',
							version : tem[1]
						};
					}
				}
				M = M[2] ? [ M[1], M[2] ] : [ navigator.appName,
						navigator.appVersion, '-?' ];
				if ((tem = ua.match(/version\/(\d+)/i)) != null) {
					M.splice(1, 1, tem[1]);
				}
				return {
					name : M[0],
					version : M[1]
				};
			}

			function showAlertCompatibilita() {
				var isOpera = !!window.opera
						|| navigator.userAgent.indexOf(' OPR/') >= 0;
				// Opera 8.0+ (UA detection to detect Blink/v8-powered Opera)
				var isFirefox = typeof InstallTrigger !== 'undefined'; // Firefox 1.0+
				var isSafari = Object.prototype.toString.call(
						window.HTMLElement).indexOf('Constructor') > 0;
				// At least Safari 3+: "[object HTMLElementConstructor]"
				var isChrome = !!window.chrome && !isOpera; // Chrome 1+
				var isIE = /*@cc_on!@*/false || !!document.documentMode; // At least IE6

				var browser = get_browser_info();
				//alert(browser.name+''+browser.version +'------------'+navigator.userAgent +'-appCodeName: '+navigator.appCodeName+'- appVersion:'+navigator.appVersion+'-appName:'+navigator.appName+'- platform:'+navigator.platform);	
				//alert(navigator.userAgent.toLowerCase()+ ' BROWSER VERSION:' +browser.version);
				var navtext = navigator.userAgent.toLowerCase();

				//alert((browser.version < 9));
				var browserOK = !isOpera
						&& (isFirefox || isChrome || isSafari || (isIE && browser.version > 9));
				if (!browserOK) {
					console.error("Browser not compatible!");
					attenzione.show();
					return;
				}
			}
			//]]>
		</script>
	
	</h:head>

	<h:body onload="showAlertCompatibilita()">

		<h:form id="dialogForm">
			<p:dialog widgetVar="attenzione" width="400" resizable="false" id="popUpVerificabrowser" header="#{lbl.attenzione}">
				<div style="padding: 5px;">#{lbl.Browser}</div>
				<div style="padding: 5px; text-align: center">
					<p:commandButton value="#{lbl.ok}" onclick="attenzione.hide();" />
				</div>
			</p:dialog>
		</h:form>
		<p:ajaxStatus onstart="statusDialog.show();" oncomplete="statusDialog.hide();" />

		<p:dialog modal="true" widgetVar="statusDialog" header="Loading" draggable="false"
			closable="false" resizable="false" width="100" height="50">
			<h:panelGroup layout="block" style="width:100%;text-align:center;">
				<p:graphicImage value="/resources/images/ajax-loader.gif" />
			</h:panelGroup>
		</p:dialog>

		<h:outputStylesheet library="css" name="style.css" />
		<div class="container">
			<div class="header"></div>

			<div class="content">
				<div class="box-content" style="padding-top: 40px;">
					<ui:insert name="content" />
				</div>
			</div>
		</div>
	</h:body>
	
</f:view>
</html>